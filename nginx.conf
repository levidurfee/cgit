worker_processes  5;  ## Default: 1
worker_rlimit_nofile 8192;

events {
    worker_connections  4096;  ## Default: 1024
}

http {
    server {
        listen [::]:80;
        listen 80;

        access_log /dev/stdout;
        error_log  /dev/stdout info;

        root /var/www/htdocs/cgit;

        location ~* ^.+\.(css|png|ico)$ {
            root /var/www/htdocs/cgit;
        }

        location / {
            include          fastcgi_params;
            fastcgi_param    SCRIPT_FILENAME /var/www/htdocs/cgit/cgit.cgi;
            fastcgi_pass     unix:/run/fcgiwrap.socket;

            fastcgi_param    PATH_INFO    $uri;
            fastcgi_param    QUERY_STRING $args;
            fastcgi_param    HTTP_HOST    $server_name;
        }
    }
}
